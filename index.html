<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¯”èµ›èµ›äº‹è®°å½•ç«™</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800 font-sans">
  <div class="max-w-6xl mx-auto p-6">
    <h1 class="text-4xl font-bold mb-6 text-center">ğŸ† æ¯”èµ›èµ›äº‹è®°å½•ç«™</h1>

    <nav class="flex justify-center space-x-6 mb-8">
      <button onclick="showSection('matches')" class="hover:underline">ğŸ“‹ æ¯”èµ›èµ›äº‹è®°å½•</button>
      <button onclick="showSection('interviews')" class="hover:underline">ğŸ¤ é‡‡è®¿è§†é¢‘</button>
    </nav>

    <section id="matches" class="hidden">
      <h2 class="text-2xl font-semibold mb-4">ğŸ“‹ é€‰æ‹©æ¯”èµ›</h2>
      <div class="grid gap-4 md:grid-cols-4 sm:grid-cols-2">
        <select id="yearSelect" onchange="loadMatchOptions()" class="p-2 rounded border">
          <option value="">é€‰æ‹©å¹´ä»½</option>
          <option value="2011">2011</option>
          <option value="2024">2024</option>
        </select>
        <select id="matchSelect" onchange="loadEventOptions()" class="p-2 rounded border hidden"></select>
        <select id="eventSelect" onchange="loadStageOptions()" class="p-2 rounded border hidden"></select>
        <select id="stageSelect" onchange="loadMatchData()" class="p-2 rounded border hidden"></select>
      </div>

      <div class="mt-4 text-sm text-gray-600" id="breadcrumb"></div>
      <div class="mt-2">
        <button onclick="goBack()" class="text-sm text-blue-600 underline hidden" id="backButton">â† è¿”å›ä¸Šä¸€æ­¥</button>
      </div>

      <div id="matchContent" class="mt-4"></div>
    </section>

    <section id="interviews" class="hidden">
      <h2 class="text-2xl font-semibold mb-4">ğŸ¤ é‡‡è®¿è§†é¢‘</h2>
      <div class="space-y-6">
        <div>
          <h3 class="text-xl font-bold">é€‰æ‰‹ A é‡‡è®¿</h3>
          <video controls class="w-full rounded shadow">
            <source src="videos/interview1.mp4" type="video/mp4">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è§†é¢‘ã€‚
          </video>
        </div>
      </div>
    </section>
  </div>

  <script>
    const matchData = {
      "2011": {
        "world_championship": {
          name: "2011ä¸Šæµ·ä¸–é”¦èµ›",
          events: {
            "200m_individualmedley": {
              name: "200ç±³ä¸ªäººæ··åˆæ³³",
              stages: {
                prelim: {
                  name: "é¢„èµ›",
                  results: "results/2011worldchampionship_200im_prelim.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2011worldchampionships200im_prelim.pdf"
                },
                semifinal: {
                  name: "åŠå†³èµ›",
                  results: "results/2011worldchampionship_200im_semifinal.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2011worldchampionships200im_semifinal.pdf"
                },
                final: {
                  name: "å†³èµ›",
                  results: "results/2011worldchampionship_200im_final.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2011worldchampionships200im_final.pdf"
                }
              }
            },
            "400m_individualmedley": {
              name: "400ç±³ä¸ªäººæ··åˆæ³³",
              stages: {
                prelim: {
                  name: "é¢„èµ›",
                  results: "results/2011worldchampionship_400im_prelim.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2011worldchampionships400im_prelim.pdf"
                },
                final: {
                  name: "å†³èµ›",
                  results: "results/2011worldchampionship_400im_final.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2011worldchampionships400im_final.pdf"
                }
              }
            }
          }
        }
      },
      "2012": {
        "olympic_games": {
          name: "2012ä¼¦æ•¦å¥¥è¿",
          events: {
            "200m_individualmedley": {
              name: "200ç±³ä¸ªäººæ··åˆæ³³",
              stages: {
                prelim: {
                  name: "é¢„èµ›",
                  results: "results/2011worldchampionship_200im_prelim.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2012og200im_prelim.pdf"
                },
                semifinal: {
                  name: "åŠå†³èµ›",
                  results: "results/2011worldchampionship_200im_semifinal.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2012og200im_semifinal.pdf"
                },
                final: {
                  name: "å†³èµ›",
                  results: "results/2011worldchampionship_200im_final.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2012og200im_final.pdf"
                }
              }
            },
            "400m_individualmedley": {
              name: "400ç±³ä¸ªäººæ··åˆæ³³",
              stages: {
                prelim: {
                  name: "é¢„èµ›",
                  results: "results/2011worldchampionship_400im_prelim.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2012og400im_prelim.pdf"
                },
                final: {
                  name: "å†³èµ›",
                  results: "results/2011worldchampionship_400im_final.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2012og400im_final.pdf"
                }
              }
            },
            "200free_relay":{
              name: "400ç±³ä¸ªäººæ··åˆæ³³",
              stages: {
                final: {
                  name: "å†³èµ›",
                  results: "results/2011worldchampionship_400im_final.csv",
                  video: "https://github.com/your-username/your-repo/releases/download/v1.0/video.mp4",
                  pdf: "resultsbook/2012og200freerelay_final.pdf"
                }
              }
            }              
          }
        }
      }
    };

    let breadcrumbState = { year: '', matchKey: '', eventKey: '', stageKey: '' };

    function showSection(sectionId) {
      document.getElementById('matches').classList.add('hidden');
      document.getElementById('interviews').classList.add('hidden');
      document.getElementById(sectionId).classList.remove('hidden');
    }

    function updateBreadcrumb() {
      const b = breadcrumbState;
      const el = document.getElementById('breadcrumb');
      let html = [];
      if (b.year) html.push(`<span class='text-blue-600 cursor-pointer hover:underline' onclick='breadcrumbJump("year")'>${b.year}</span>`);
      if (b.matchKey) html.push(`<span class='text-blue-600 cursor-pointer hover:underline' onclick='breadcrumbJump("match")'>${matchData[b.year][b.matchKey].name}</span>`);
      if (b.eventKey) html.push(`<span class='text-blue-600 cursor-pointer hover:underline' onclick='breadcrumbJump("event")'>${matchData[b.year][b.matchKey].events[b.eventKey].name}</span>`);
      if (b.stageKey) html.push(`<span class='text-blue-600 cursor-pointer hover:underline' onclick='breadcrumbJump("stage")'>${matchData[b.year][b.matchKey].events[b.eventKey].stages[b.stageKey].name}</span>`);
      el.innerHTML = html.join(' > ');
    }

    function breadcrumbJump(level) {
      if (level === 'year') {
        breadcrumbState = { year: '', matchKey: '', eventKey: '', stageKey: '' };
        document.getElementById('yearSelect').value = '';
        loadMatchOptions();
      } else if (level === 'match') {
        breadcrumbState = { ...breadcrumbState, matchKey: '', eventKey: '', stageKey: '' };
        document.getElementById('matchSelect').value = '';
        loadEventOptions();
      } else if (level === 'event') {
        breadcrumbState = { ...breadcrumbState, eventKey: '', stageKey: '' };
        document.getElementById('eventSelect').value = '';
        loadStageOptions();
      } else if (level === 'stage') {
        breadcrumbState = { ...breadcrumbState, stageKey: '' };
        document.getElementById('stageSelect').value = '';
        document.getElementById('matchContent').innerHTML = '';
        updateBreadcrumb();
      }
    }

    function loadMatchOptions() {
      const year = document.getElementById('yearSelect').value;
      const matchSelect = document.getElementById('matchSelect');
      const eventSelect = document.getElementById('eventSelect');
      const stageSelect = document.getElementById('stageSelect');
      breadcrumbState = { year, matchKey: '', eventKey: '', stageKey: '' };
      updateBreadcrumb();
      matchSelect.innerHTML = '<option value="">é€‰æ‹©æ¯”èµ›</option>';
      if (matchData[year]) {
        Object.entries(matchData[year]).forEach(([key, val]) => {
          matchSelect.innerHTML += `<option value="${key}">${val.name}</option>`;
        });
        matchSelect.classList.remove('hidden');
      }
      eventSelect.classList.add('hidden');
      stageSelect.classList.add('hidden');
    }

    function loadEventOptions() {
      const year = breadcrumbState.year;
      const matchKey = document.getElementById('matchSelect').value;
      const eventSelect = document.getElementById('eventSelect');
      const stageSelect = document.getElementById('stageSelect');
      breadcrumbState = { ...breadcrumbState, matchKey, eventKey: '', stageKey: '' };
      updateBreadcrumb();
      eventSelect.innerHTML = '<option value="">é€‰æ‹©é¡¹ç›®</option>';
      if (matchData[year]?.[matchKey]) {
        Object.entries(matchData[year][matchKey].events).forEach(([key, val]) => {
          eventSelect.innerHTML += `<option value="${key}">${val.name}</option>`;
        });
        eventSelect.classList.remove('hidden');
      }
      stageSelect.classList.add('hidden');
    }

    function loadStageOptions() {
      const year = breadcrumbState.year;
      const matchKey = breadcrumbState.matchKey;
      const eventKey = document.getElementById('eventSelect').value;
      const stageSelect = document.getElementById('stageSelect');
      breadcrumbState = { ...breadcrumbState, eventKey, stageKey: '' };
      updateBreadcrumb();
      stageSelect.innerHTML = '<option value="">é€‰æ‹©é˜¶æ®µ</option>';
      if (matchData[year]?.[matchKey]?.events?.[eventKey]) {
        Object.entries(matchData[year][matchKey].events[eventKey].stages).forEach(([key, val]) => {
          stageSelect.innerHTML += `<option value="${key}">${val.name}</option>`;
        });
        stageSelect.classList.remove('hidden');
      }
    }

    async function loadMatchData() {
      const year = breadcrumbState.year;
      const matchKey = breadcrumbState.matchKey;
      const eventKey = breadcrumbState.eventKey;
      const stageKey = document.getElementById('stageSelect').value;
      const content = document.getElementById('matchContent');
      const backButton = document.getElementById('backButton');
      if (!matchData[year]?.[matchKey]?.events?.[eventKey]?.stages?.[stageKey]) return;
      const stage = matchData[year][matchKey].events[eventKey].stages[stageKey];
      const response = await fetch(stage.results);
      const csv = await response.text();
      const tableHTML = csvToTable(csv);
      breadcrumbState.stageKey = stageKey;
      updateBreadcrumb();
      let videoEmbed = '';
      if (stage.video.includes('youtube.com') || stage.video.includes('bilibili.com') || stage.video.includes('embed')) {
        videoEmbed = `<iframe class="w-full aspect-video rounded shadow" src="${stage.video}" frameborder="0" allowfullscreen></iframe>`;
      } else {
        videoEmbed = `<video controls class="w-full rounded shadow mb-6">
                        <source src="${stage.video}" type="video/mp4">
                        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è§†é¢‘ã€‚
                      </video>`;
      }
      content.innerHTML = `
        <h3 class="text-xl font-bold mb-2">${year} å¹´ ${matchData[year][matchKey].name} - ${matchData[year][matchKey].events[eventKey].name} - ${stage.name}</h3>
        <div class="overflow-auto mb-6">${tableHTML}</div>
        <div class="mt-4">
          <h4 class="text-lg font-semibold mb-2">ğŸ¥ æ¯”èµ›è§†é¢‘</h4>
          ${videoEmbed}
        </div>
        <div class="mt-4">
          <h4 class="text-lg font-semibold mb-2">ğŸ“„ å®Œæ•´æˆç»©å†Œ PDF</h4>
          <iframe src="${stage.pdf || ''}" class="w-full h-96 border rounded" frameborder="0"></iframe>
        </div>`;
      backButton.classList.remove('hidden');
    }

    function goBack() {
      document.getElementById('matchContent').innerHTML = '';
      document.getElementById('backButton').classList.add('hidden');
      breadcrumbState.stageKey = '';
      updateBreadcrumb();
    }

    function csvToTable(csv) {
      const rows = csv.trim().split('\n');
      const headers = rows[0].split(',');
      const body = rows.slice(1);
      let table = '<table class="min-w-full bg-white border border-gray-300 text-sm text-left"><thead><tr>';
      headers.forEach(h => table += `<th class="px-4 py-2 border-b">${h}</th>`);
      table += '</tr></thead><tbody>';
      body.forEach(row => {
        table += '<tr>';
        row.split(',').forEach(cell => {
          table += `<td class="px-4 py-2 border-b">${cell}</td>`;
        });
        table += '</tr>';
      });
      table += '</tbody></table>';
      return table;
    }

    showSection('matches');
  </script>
</body>
</html>
