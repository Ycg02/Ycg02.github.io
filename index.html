<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¯”èµ›èµ›äº‹è®°å½•ç«™</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800 font-sans">
  <div class="max-w-6xl mx-auto p-6">
    <h1 class="text-4xl font-bold mb-6 text-center">ğŸ† æ¯”èµ›èµ›äº‹è®°å½•ç«™</h1>

    <!-- å¯¼èˆª -->
    <nav class="flex justify-center space-x-6 mb-8">
      <button onclick="showSection('matches')" class="hover:underline">ğŸ“‹ æ¯”èµ›èµ›äº‹è®°å½•</button>
      <button onclick="showSection('interviews')" class="hover:underline">ğŸ¤ é‡‡è®¿è§†é¢‘</button>
    </nav>

    <!-- æ¯”èµ›èµ›äº‹è®°å½• -->
    <section id="matches" class="hidden">
      <h2 class="text-2xl font-semibold mb-4">ğŸ“‹ é€‰æ‹©æ¯”èµ›</h2>
      <div class="mb-4 space-y-2">
        <select id="matchSelect" onchange="loadStageOptions()" class="p-2 rounded border w-full">
          <option value="">è¯·é€‰æ‹©æ¯”èµ›</option>
          <option value="match1">2025 æ˜¥å­£é”¦æ ‡èµ›</option>
          <option value="match2">2024 å†¬å­£å…¬å¼€èµ›</option>
        </select>
        <select id="stageSelect" onchange="loadMatchData()" class="p-2 rounded border w-full hidden">
          <!-- åŠ¨æ€åŠ è½½é˜¶æ®µé€‰é¡¹ -->
        </select>
      </div>

      <div id="matchContent" class="mt-4">
        <!-- åŠ¨æ€åŠ è½½å†…å®¹ -->
      </div>
    </section>

    <!-- é‡‡è®¿è§†é¢‘ -->
    <section id="interviews" class="hidden">
      <h2 class="text-2xl font-semibold mb-4">ğŸ¤ é‡‡è®¿è§†é¢‘</h2>
      <div class="space-y-6">
        <div>
          <h3 class="text-xl font-bold">é€‰æ‰‹ A é‡‡è®¿</h3>
          <video controls class="w-full rounded shadow">
            <source src="videos/interview1.mp4" type="video/mp4">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è§†é¢‘ã€‚
          </video>
        </div>
        <div>
          <h3 class="text-xl font-bold">æ•™ç»ƒ B é‡‡è®¿</h3>
          <video controls class="w-full rounded shadow">
            <source src="videos/interview2.mp4" type="video/mp4">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è§†é¢‘ã€‚
          </video>
        </div>
      </div>
    </section>
  </div>

  <script>
    const matchData = {
      match1: {
        title: "2025 æ˜¥å­£é”¦æ ‡èµ›",
        stages: {
          prelim: { name: "é¢„èµ›", results: "data/2025_spring_prelim.csv", video: "videos/2025_spring_prelim.mp4" },
          semi: { name: "åŠå†³èµ›", results: "data/2025_spring_semi.csv", video: "videos/2025_spring_semi.mp4" },
          final: { name: "å†³èµ›", results: "data/2025_spring_final.csv", video: "videos/2025_spring_final.mp4" }
        }
      },
      match2: {
        title: "2024 å†¬å­£å…¬å¼€èµ›",
        stages: {
          prelim: { name: "é¢„èµ›", results: "data/2024_winter_prelim.csv", video: "videos/2024_winter_prelim.mp4" },
          semi: { name: "åŠå†³èµ›", results: "data/2024_winter_semi.csv", video: "videos/2024_winter_semi.mp4" },
          final: { name: "å†³èµ›", results: "data/2024_winter_final.csv", video: "videos/2024_winter_final.mp4" }
        }
      }
    };

    function showSection(sectionId) {
      document.getElementById('matches').classList.add('hidden');
      document.getElementById('interviews').classList.add('hidden');
      document.getElementById(sectionId).classList.remove('hidden');
    }

    function loadStageOptions() {
      const matchKey = document.getElementById('matchSelect').value;
      const stageSelect = document.getElementById('stageSelect');
      const content = document.getElementById('matchContent');
      content.innerHTML = '';

      if (!matchKey || !matchData[matchKey]) {
        stageSelect.classList.add('hidden');
        return;
      }

      const stages = matchData[matchKey].stages;
      stageSelect.innerHTML = '<option value="">è¯·é€‰æ‹©é˜¶æ®µ</option>';
      for (let key in stages) {
        stageSelect.innerHTML += `<option value="${key}">${stages[key].name}</option>`;
      }
      stageSelect.classList.remove('hidden');
    }

    async function loadMatchData() {
      const matchKey = document.getElementById('matchSelect').value;
      const stageKey = document.getElementById('stageSelect').value;
      const content = document.getElementById('matchContent');

      if (!matchKey || !stageKey || !matchData[matchKey]?.stages[stageKey]) {
        content.innerHTML = '';
        return;
      }

      const match = matchData[matchKey];
      const stage = match.stages[stageKey];

      const response = await fetch(stage.results);
      const csvText = await response.text();
      const tableHTML = csvToTable(csvText);

      content.innerHTML = `
        <h3 class="text-xl font-bold mb-2">${match.title} - ${stage.name}</h3>
        <div class="overflow-auto mb-6">
          ${tableHTML}
        </div>
        <div class="mt-4">
          <h4 class="text-lg font-semibold mb-2">ğŸ¥ æ¯”èµ›è§†é¢‘</h4>
          <video controls class="w-full rounded shadow">
            <source src="${stage.video}" type="video/mp4">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è§†é¢‘ã€‚
          </video>
        </div>
      `;
    }

    function csvToTable(csv) {
      const rows = csv.trim().split('\n');
      const headers = rows[0].split(',');
      const body = rows.slice(1);
      let table = '<table class="min-w-full bg-white border border-gray-300 text-sm text-left"><thead><tr>';
      headers.forEach(h => table += `<th class="px-4 py-2 border-b">${h}</th>`);
      table += '</tr></thead><tbody>';
      body.forEach(row => {
        table += '<tr>';
        row.split(',').forEach(cell => {
          table += `<td class="px-4 py-2 border-b">${cell}</td>`;
        });
        table += '</tr>';
      });
      table += '</tbody></table>';
      return table;
    }

    // é»˜è®¤æ˜¾ç¤ºèµ›äº‹è®°å½•é¡µé¢
    showSection('matches');
  </script>
</body>
</html>
